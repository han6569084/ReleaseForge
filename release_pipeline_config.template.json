{
  "release": {
    "project": "cologne",
    "device_name": "cologne",
    "stage": "beta1",
    "version": "2.0.11.1",
    "variant": "cologne beta1 v2.0.11.1",
    "notes": ""
  },
  "jenkins": {
    "base_url": "https://jenkins.huami.com",
    "timeout_sec": 600,
    "auth": {
      "type": "basic",
      "username": "<JENKINS_USER>",
      "password": "${JENKINS_PASSWORD}"
    },
    "triggers": {
      "job_url": "https://jenkins.huami.com/job/firmware_auto_trigger/job/HuamiOS_HS3",
      "auto_run_pipeline": true,
      "pipeline_args": [],
      "release": {
        "parameters": {
          "PRODUCT": "cologne",
          "TAG_NAME": "cologne-beta5",
          "BOOT_TAG_NAME": "cologne-bootloader-1.3.0",
          "RECOVERY_TAG_NAME": "cologne-recovery-1.3.0",
          "FCT_TAG_NAME": "cologne-fct-1.4.0",
          "BUILD_MODE": "OTA,OTA_SLEEP,FCT,BOOT,RECOVERY",
          "BUILD_TEST_TOOL": "是",
          "VERSION_NAME": "2.0.9",
          "FCT_VERSION_NAME": "1.4.0",
          "BUILD_RELEASE": "release"
        }
      },
      "debug": {
        "parameters": {
          "PRODUCT": "cologne",
          "TAG_NAME": "cologne-beta5",
          "BOOT_TAG_NAME": "cologne-bootloader-1.3.0",
          "RECOVERY_TAG_NAME": "cologne-recovery-1.3.0",
          "FCT_TAG_NAME": "cologne-fct-1.4.0",
          "BUILD_MODE": "OTA,BOOT,RECOVERY",
          "VERSION_NAME": "2.0.10",
          "FCT_VERSION_NAME": "1.4.0",
          "BUILD_RELEASE": "debug"
        }
      }
    },
    "builds": {
      "debug": {
        "build_url": "https://jenkins.huami.com/job/firmware_auto_trigger/job/HuamiOS_HS3/4153/",
        "download": {
          "mode": "artifacts",
          "include_globs": [
            "**/*"
          ],
          "exclude_globs": [
            "**/*.log"
          ],
          "output_dir": "work/download/debug",
          "overwrite": true
        }
      },
      "release": {
        "build_url": "https://jenkins.huami.com/job/firmware_auto_trigger/job/HuamiOS_HS3/4152/",
        "download": {
          "mode": "artifacts",
          "include_globs": [
            "**/*"
          ],
          "exclude_globs": [
            "**/*.log"
          ],
          "output_dir": "work/download/release",
          "overwrite": true
        }
      }
    }
  },
  "prepare": {
    "mode": "placeholders_dsl",
    "workspace_dir": "work/prepare",
    "clean": true,
    "notes": "Release: 按规则解压提取 watch@mhs003.elf + watch@mhs003_ota_sign.zip，生成 staging 目录后再上传。"
  },
  "nas": {
    "webdav": {
      "base_url": "https://10.2.100.85:5006",
      "verify_tls": false,
      "timeout_sec": 1800,
      "auth": {
        "username": "<NAS_USER>",
        "password": "${NAS_WEBDAV_PASSWORD}"
      }
    },
    "dsm": {
      "base_url": "https://10.2.100.85:5001",
      "verify_tls": false,
      "auth": {
        "username": "<NAS_USER>",
        "password": "${NAS_DSM_PASSWORD}"
      }
    },
    "remote": {
      "base_dir": "/GT智能手表事业部/软件部/软件版本文档/Cologne/ASAN固件",
      "folder_name": "${release.variant}",
      "path_strategy": "base_plus_folder"
    },
    "uploads": [
      {
        "name": "debug",
        "remote_subdir": "Monkey",
        "local_dir": "${jenkins.builds.debug.download.output_dir}",
        "include_globs": [
          "**/*"
        ],
        "exclude_globs": [],
        "overwrite": true
      },
      {
        "name": "release",
        "remote_subdir": "Release",
        "local_dir": "${jenkins.builds.release.download.output_dir}",
        "extra_local_dirs": [
          "${prepare.workspace_dir}/release_extract/upload_payload"
        ],
        "include_globs": [
          "**/*"
        ],
        "exclude_globs": [],
        "overwrite": true
      }
    ]
  },
  "doc": {
    "enabled": true,
    "output_dir": "",
    "filename_template": "{project}_{version}_{timestamp}_版本文档.md"
  },
  "notifications": {
    "webhook": {
      "enabled": true,
      "url": "https://www.feishu.cn/flow/api/trigger-webhook/xxxxx",
      "verify_tls": true,
      "timeout_sec": 10,
      "on_success": true,
      "on_failure": true,
      "on_progress": true,
      "print_response": false,
      "payload_by_event": {
        "download_start": {
          "text": "开始下载(${runtime.extra.run_name})\nBuild: ${runtime.extra.build_url}\nOut: ${runtime.extra.out_dir}"
        },
        "failed": {
          "text": "${release.device_name} ${release.stage} ${release.version} 流程失败\n原因: ${runtime.message}\n耗时: ${runtime.duration_sec}s\nRelease: ${jenkins.builds.release.build_url}\nDebug: ${jenkins.builds.debug.build_url}\nFeishu: ${runtime.extra.feishu_url}"
        }
      },
      "payload": {
        "text": "${release.device_name} ${release.stage} ${release.version} 打包完成\n耗时: ${runtime.duration_sec}s\nRelease: ${jenkins.builds.release.build_url}\nDebug: ${jenkins.builds.debug.build_url}\nFeishu: ${runtime.extra.feishu_url}"
      }
    }
  },
  "feishu": {
    "enabled": true,
    "use_wiki": true,
    "wiki_copy_only": true,
    "docx_replace_placeholders": true,
    "docx_replace_only": true,
    "print_placeholder_mapping": true,
    "user_access_token": "${FEISHU_USER_ACCESS_TOKEN}",
    "user_access_token_env": "FEISHU_USER_ACCESS_TOKEN",
    "user_refresh_token": "",
    "user_refresh_token_env": "FEISHU_USER_REFRESH_TOKEN",
    "user_access_token_expires_at": 1766825245,
    "user_refresh_token_expires_at": 0,
    "oauth": {
      "enabled": true,
      "app_id": "<FEISHU_APP_ID>",
      "app_secret": "${FEISHU_APP_SECRET}",
      "redirect_uri": "http://localhost:8000/callback",
      "scopes": "wiki:wiki wiki:node:read wiki:node:copy docx:document drive:drive docs:document:copy docs:document:read docs:document:write offline_access",
      "open_browser": true,
      "timeout_sec": 300,
      "token_timeout_sec": 30,
      "refresh_skew_sec": 300,
      "auto_save_user_access_token": true,
      "auto_oauth_on_99991677": true
    },
    "template_node_token": "",
    "template_page_id": "",
    "target_space_id": "7314490024274378754",
    "target_parent_token": "",
    "template_file_token": "",
    "docx_target_folder_token": "",
    "docx_allow_create_fallback": true,
    "docx_domain": "",
    "admin_email": "",
    "share_admin_perm": "full_access",
    "share_file_type": "docx",
    "name_template": "{{REL_DEVICE_NAME}} {{REL_STAGE}} {{REL_VERSION}}",
    "placeholder_overrides": {
      "{{REL_BOOTLOADER_MANIFEST_INFO}}": "",
      "{{REL_RECOVERY_MANIFEST_INFO}}": "",
      "{{REL_BUILD_LOG_FILE}}": ""
    },
    "parent_block_id": "",
    "insert_index": -1,
    "timeout_sec": 30,
    "debug_dump_response": false,
    "user_token_saved_at": 1766818045
  }
}
